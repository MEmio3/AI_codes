:root{
  --bg:#0c1220;--panel:#111827;--dot:#2a3754;--text:#e5ecf7;--muted:#9aa3b2;
  --card:rgba(255,255,255,.06);--border:rgba(255,255,255,.14);--accent:#7dd3fc;
  --accent2:#a78bfa;--hot:#eab308;--warn:#ef4444;--edge:#ef4444;--head:#34d399;
  --shadow:0 10px 30px rgba(0,0,0,.35);--code:#0b0f16;
}
html[data-theme="light"]{
  --bg:#f3f6fb;--panel:#ffffff;--dot:#dbe3f8;--text:#0f172a;--muted:#5d6471;
  --card:rgba(0,0,0,.04);--border:rgba(0,0,0,.12);--accent:#0ea5e9;--accent2:#6f42c1;
  --hot:#b45309;--warn:#dc2626;--edge:#dc2626;--head:#059669;--shadow:0 8px 24px rgba(0,0,0,.12);
  --code:#0f172a;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
  color:var(--text);background:var(--bg);
}
h1,h2,h3{margin:0}
.muted{color:var(--muted)} .sep{opacity:.5;margin:0 .5rem}

.hero{
  position:relative;display:flex;align-items:center;justify-content:center;gap:16px;
  padding:28px 16px 8px; text-align:center;
}
.hero h1{font-size:38px;letter-spacing:.4px}
.hero p{margin:6px 0 0 0;color:var(--muted)}
.hero-right{position:absolute;right:16px;top:16px}
.icon-btn{width:40px;height:40px;border-radius:10px;border:1px solid var(--border);
  background:var(--card);display:grid;place-items:center;cursor:pointer}
.icon-btn svg{width:22px;fill:currentColor}
.icon-btn .sun{display:none}
html[data-theme="light"] .icon-btn .sun{display:block}
html[data-theme="light"] .icon-btn .moon{display:none}

/* Cards & grids */
.card{
  border:1px solid var(--border);border-radius:16px;background:var(--panel);box-shadow:var(--shadow);
  margin:14px auto;max-width:1320px;padding:0;overflow:hidden;
}
.grid-3,.grid-2{max-width:1320px;margin:14px auto;display:grid;gap:14px}
.grid-3{grid-template-columns:1fr 1.2fr 1fr}
.grid-2{grid-template-columns:1fr 1fr}
@media(max-width:1100px){.grid-3,.grid-2{grid-template-columns:1fr}}

.card>h3,.code-head{padding:14px 16px;border-bottom:1px solid var(--border)}
.info{margin:0;padding:14px 16px;white-space:pre-wrap}
.size-line{display:flex;justify-content:space-between;padding:10px 16px;border-top:1px dashed var(--border)}
.foot-note{opacity:.6;text-align:center;padding:24px}

/* Inputs & buttons */
.input{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);
  background:var(--panel);color:var(--text);margin:10px 0}
.btn{border:1px solid var(--border);background:var(--card);color:var(--text);
  padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:600}
.btn.subtle{background:transparent}
.btn.warn{border-color:var(--warn);color:var(--warn)}
.switch{display:flex;align-items:center;gap:8px}
.runner{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.speed{display:flex;align-items:center;gap:8px;margin-left:8px}

/* Canvas */
.canvas{position:relative;height:320px;overflow-x:auto;overflow-y:hidden;background:
 linear-gradient(180deg,rgba(125,211,252,.18),rgba(167,139,250,.16)),
 radial-gradient(1000px 400px at 20% -10%,rgba(125,211,252,.15),transparent 50%),
 radial-gradient(1000px 400px at 120% 120%,rgba(167,139,250,.12),transparent 50%);}
.canvas::before{
  content:"";position:absolute;inset:0;background:
  radial-gradient(circle at 1px 1px,var(--dot) 1px,transparent 1px);
  background-size:22px 22px;opacity:.5;pointer-events:none;
}
.canvas-footer{display:flex;justify-content:space-between;align-items:center;
  padding:10px 12px;border-top:1px solid var(--border);background:var(--card)}
.left-foot,.right-foot{display:flex;gap:8px;align-items:center}
.wires,.nodes{position:absolute;inset:0;height:100%}
.wires{width:100%;pointer-events:none}
.nodes{top:0;left:0}

/* Chips and nodes */
.chip{position:absolute;display:inline-flex;align-items:center;gap:8px;
  padding:6px 10px;border-radius:12px;background:var(--panel);border:1px solid var(--border);
  box-shadow:var(--shadow);font-weight:700;color:var(--text)}
.node{
  position:absolute;width:120px;height:70px;border-radius:16px;border:1px solid var(--border);
  background:linear-gradient(180deg,rgba(255,255,255,.06),transparent);
  display:grid;place-items:center;color:var(--text);box-shadow:0 10px 24px rgba(0,0,0,.25);
  transition:transform .35s cubic-bezier(.2,.8,.2,1),opacity .25s ease,filter .2s;
}
.node .pill{padding:4px 10px;border-radius:999px;background:var(--card);border:1px solid var(--border);font-weight:700}
.node.adding{transform:translateY(-10px) scale(.96);opacity:0}
.node.added{transform:translateY(0) scale(1);opacity:1}
.node.explode{transform:scale(.6) rotate(-6deg);filter:blur(1px);opacity:0}
.node.hot{outline:2px solid var(--accent)}
.burst{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.4);
  width:70px;height:70px;border-radius:50%;background:radial-gradient(#fff 0 15%, var(--warn) 16% 40%, transparent 41%);
  pointer-events:none;opacity:.9;animation:burst .4s ease-out forwards}
@keyframes burst{to{transform:translate(-50%,-50%) scale(1.2);opacity:0}}

.wires path.edge{fill:none;stroke:var(--edge);stroke-width:3;marker-end:url(#arrow);
  transition:d .35s cubic-bezier(.2,.8,.2,1),opacity .25s}
.wires path.edge.hot{stroke:var(--hot)}
.wires path.edge.fade{opacity:0}

/* Code */
.code{margin:0;padding:14px 16px;background:var(--code);color:#e6edf3;overflow-x:auto}
.code .line{display:block;white-space:pre;padding:2px 6px;border-left:3px solid transparent}
.code .line.hl{background:rgba(125,211,252,.12);border-left-color:var(--accent)}
